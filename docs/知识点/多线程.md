---
sidebar_position: 2
---

# 多线程

我相信各位已经从课本上阅读到有关线程的官方概念解释，其中包含了线程的一些性质，我相信不少人会像我一样，在初次见到“操作系统能够进行运算调度的最小单位”这段话时一头雾水，因此，我们也不使用庞杂抽象的定语来为线程下定义，就通过一个例子来简单解释，让我们了解一下它的现象，再通过现象来分析本质。

## 什么是多线程

我们举一个简单的例子：现在手里有一个程序，它要完成4个工作，每个工作相互独立不存在拓扑关系。

![程序图](img/多线程_程序.png)

那么如果使用串行执行的话会是这样的：

![串行](img/多线程_串行.png)

假设每个`Job`的执行时间都是10秒，那么整个程序运行的总时长是$10\times4=40$秒。

如果我们将它们并行，每个工作都放到不同的线程上同时进行，那么会是这样的：

![并行](img/多线程_并行.png)

此时整个程序的总执行时长是$\max(10,10,10,10)+N$秒，其中$N$是创建线程和销毁线程的时间开销。一般来说，创建线程和销毁线程时间要远小于10秒，因此我们可以认为如果使用并行策略，那么只需要大约10秒便可以完成串行40秒的任务。

当然上面的这个例子比较理想，完全不相干的多个任务被要求在同一个程序内执行的概率本来就不大，大部分场景下多个任务之间或多或少会有一些拓扑关系，但这并不意味着多线程不重要，相反，合理地划分计算单元以最大程度上利用硬件资源是软件设计开发的一项重要能力。

## 线程库Threading

## 线程池库

线程池库介绍

线程池的常见设计思路：任务型、计算器型。

## Python的多线程问题

GIL、适用场景、验证、多进程、协程